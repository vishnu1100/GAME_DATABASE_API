<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">

  <title>JDM_Z</title>

  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link rel="shortcut icon" href="assets/images/favicon.png" type="image/x-icon">

  <link href="" rel="shortcut icon"/>
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <!-- Additional CSS Files -->
  <link rel="stylesheet" href="assets/css/fontawesome.css">
  <link rel="stylesheet" href="assets/css/templatemo-cyborg-gaming.css">
  <link rel="stylesheet" href="assets/css/owl.css">
  <link rel="stylesheet" href="assets/css/animate.css">
  <link rel="stylesheet" href="assets/css/main.css">
  <link rel="stylesheet" href="https://unpkg.com/swiper@7/swiper-bundle.min.css"/>
  <script src="assets/js/api.js"></script>
  <script src="assets/js/custom.js"></script>

 <script src="assets/js/darkmode.js"></script>

  

</head>
<style>

</style>

<body>
 

<!-- ***** Preloader Start ***** -->
<div id="js-preloader" class="js-preloader">
  <div class="preloader-inner">
    <span class="dot"></span>
    <div class="dots">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>
</div>
<!-- ***** Preloader End ***** -->

<!-- ***** Header Area Start ***** -->
<header class="header-area header-sticky">
  <div class="container" id="head">
    <div class="row">
      <div class="col-12">
        <nav class="main-nav">
          <!-- ***** Logo Start ***** -->
          <a href="index.html" class="logo">
            <img src="assets/images/pngwing.com.png"   height="160px" alt="">
          </a>
          <!-- ***** Logo End ***** -->
          <!-- ***** Search End ***** -->
          <div class="search-input">

          </div>
          <!-- ***** Search End ***** -->
          <!-- ***** Menu Start ***** -->
          <ul class="nav">
            <li> <input type="text" class="form-control" id="search-input" placeholder="search-here"></li>
              <li><button id="search-button" class="btn btn-success">SEARCH</button></li>
              <li></li>

            <li><a href="index.html" class="active">Home</a></li>
            <li><a href="platforms.html">Platforms</a></li>
            
            
            <li><a href="#footer">Details</a></li>
            <li><a href="">Streams</a></li>
            <label class="switch-container" style="margin-top: 10px;">
              <input type="checkbox" onclick="myFunction()">
              <span class="slider"></span>
            </label>
           


          </ul>

          <a class='menu-trigger'>
            <span>Menu</span>
          </a>
          <!-- ***** Menu End ***** -->
        </nav>
      </div>
    </div>
  </div>
</header>
<!-- ***** Header Area End ***** -->

<div class="container">
  <div class="row">
    <div class="col-lg-12">
      <div class="page-content" id="content">
        
        
        
        

        <!-- ***** Banner Start ***** -->
        <div class="main-banner">
          <div class="row">
            <div class="col-lg-7">
              <div class="header-text">
                <h6 style="color:gray;font-weight:bolder;" >Welcome To JDM Culture</h6>
                <h4><em>Browse</em>  Popular Games Here</h4>
                <div class="main-button">
                  <a href="#browse">Browse Now</a>
                </div>
              </div>
            </div>
          </div>
        </div>
         <!-- Pagination -->
         <nav aria-label="Page navigation example">
          <ul class="pagination" id="pagination-list"></ul>
        </nav>
        <!-- ***** Banner End ***** -->

        <!-- ***** Most Popular Start ***** -->
        <div class="most-popular" id="browse">
          <div class="row">
            <div class="col-lg-12">
              <div class="heading-section">
                <h4><em>Most Popular</em> Right Now</h4>
              </div>
              <div id="games" class="row"></div>
            </div>
          </div>
        </div>
        <!-- ***** Most Popular End ***** -->


      </div>
    </div>
  </div>
</div>

<footer>
  
  <div class="container" id="footer">
    <div class="row">
      <div class="col-lg-12">
        <p>Copyright Â© 2023 <a href="https://vishnu1100.github.io/Trexy_MODZ/">Trexy Modding Gaming</a>
          Company. All rights reserved.

           Distributed By <a href="https://vishnu1100.github.io/Trexy_MODZ/"
            target="_blank">Trexy modding .co</a></p>
      </div>
    </div>
  </div>
</footer>


<!-- Scripts -->
<!-- Bootstrap core JavaScript -->
<script src="vendor/jquery/jquery.min.js"></script>
<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="assets/js/isotope.min.js"></script>
<script src="assets/js/owl-carousel.js"></script>
<script src="assets/js/tabs.js"></script>
<script src="assets/js/popup.js"></script>
<script src="assets/js/custom.js"></script>















<script>

  
//function for displaying  the  data from api url with access token


  const apiKey = '82128c870c244c58b02d8c0a7185db22';

let currentPage = 1; // Initialize current page
let currentQuery = ''; // Initialize current search query









function fetchData(page, query = '') {
  const apiUrl = `https://api.rawg.io/api/games?key=${apiKey}&page=${page}&search=${query}`;

  fetch(apiUrl)
  .then(response => response.json())
  .then(data => {
    const gamesContainer = document.getElementById('games');
    gamesContainer.innerHTML = ''; // Clear previous data
    data.results.forEach(game => {
      const gameDiv = document.createElement('div');
      gameDiv.classList.add('col-md-4');
      
      gameDiv.innerHTML = `
        <div class="game">
          <img id="image" src="${game.background_image}"  class="mb-3">
          <a href="#"  onclick="fetchGameDetails(${game.id})"><h2 id="link">${game.name}</h2></a>
          <p>Released: ${game.released}</p>
          <p>Rating: ${game.rating}</p>
          <p>Platforms: ${game.platforms.map(platform => platform.platform.name).join(', ')}</p>
        </div>
      `;
      gamesContainer.appendChild(gameDiv);
    });
  })
  .catch(error => console.error('Error fetching data:', error));
}




//function for pushing the fetched data to another page  






function fetchGameDetails(gameId) {
  const apiUrl = `https://api.rawg.io/api/games/${gameId}?key=${apiKey}`;

  fetch(apiUrl)
  .then(response => response.json())
  .then(data => {


    // Redirect to a new page with game details as query parameters


    const queryParams = new URLSearchParams();
    queryParams.set('name', data.name);
    queryParams.set('released', data.released);
    queryParams.set('rating', data.rating);
    queryParams.set('description',data.description);
    queryParams.set('platforms', data.platforms.map(platform => platform.platform.name).join(', '));
    queryParams.set('image',data.background_image);
    queryParams.set('image2',data.background_image_additional);
    queryParams.set('id',gameId);
    queryParams.set('website',data.website);
    queryParams.set('reddit',data.reddit_url);
    // queryParams.set('requirements',data.platforms.map(platform => platform.platform.games_count).join(', '));
    queryParams.set('minrequirements',data.platforms.map(requirements => requirements.requirements.minimum).join(', '));
    queryParams.set('recrequirements',data.platforms.map(requirements => requirements.requirements.recommended).join(', '));
    queryParams.set('stores',data.stores.map(store => store.store.name).join(', '));
    queryParams.set('company',data.developers.map(developers => developers.name).join(', '));
    queryParams.set('genre',data.genres.map(genres => genres.name).join(', '));
    queryParams.set('tags',data.tags.map(tags => tags.name).join(', '));
    // queryParams.set('esrb',data.esrb_rating.map(esrb_rating => esrb_rating.name).join(', '));
   
   



    window.location.href = `info.html?${queryParams.toString()}`;
    console.log(data);
  })
  .catch(error => console.error('Error fetching game details:', error));
}


function updatePagination(totalPages) {
  const paginationList = document.getElementById('pagination-list');
  paginationList.innerHTML = ''; // Clear previous pagination links

  for (let i = 1; i <= totalPages; i++) {
    const listItem = document.createElement('li');
    const link = document.createElement('a');
    link.href = `?page=${i}`;
    link.textContent = i;
    link.addEventListener('click', function(event) {
      event.preventDefault();
      currentPage = i;
      fetchData(currentPage, currentQuery);
      window.history.pushState({ page: currentPage }, '', `?page=${currentPage}`);
    });
    listItem.appendChild(link);
    paginationList.appendChild(listItem);
  }
}

window.onload = function() {
  const urlParams = new URLSearchParams(window.location.search);
  const pageParam = urlParams.get('page');
  currentPage = pageParam ? parseInt(pageParam) : 1; // Get current page from URL

  fetchData(currentPage);
  // Assuming total pages is 10 for now, you can update this dynamically from your API response
  updatePagination(15);

  // Search box functionality
  const searchInput = document.getElementById('search-input');
  const searchButton = document.getElementById('search-button');

  searchButton.addEventListener('click', function() {
    currentQuery = searchInput.value.trim();
    fetchData(currentPage, currentQuery);
  });

  // Optionally, you can add functionality to trigger search on pressing Enter key
  searchInput.addEventListener('keypress', function(event) {
    if (event.key === 'Enter') {
      currentQuery = searchInput.value.trim();
      fetchData(currentPage, currentQuery);
    }
  });
};

</script>
</body>

</html>
